<%= simple_form_for @mock, html: { class: 'mock-form' } do |form| %>
  <ul class="nav nav-tabs" role="tablist">
    <li class="nav-item" role="presentation">
      <a class="nav-link active" data-toggle="tab" href="#general" id="general-tab" role="tab" aria-controls="general">General</a>
    </li>

    <li class="nav-item" role="presentation">
      <a class="nav-link" data-toggle="tab" href="#response-body" id="respone-body-tab" role="tab" aria-controls="response-body">Response body</a>
    </li>

    <li class="nav-item" role="presentation">
      <a class="nav-link" data-toggle="tab" href="#headers" id="headers-tab" role="tab" aria-controls="headers">Headers</a>
    </li>

    <li class="nav-item" role="presentation">
      <a class="nav-link" data-toggle="tab" href="#advanced" id="advanced-tab" role="tab" aria-controls="advanced">Advanced</a>
    </li>
  </ul>

  <div class="tab-content">
    <div class="tab-pane fade show active" id="general" role="tabpanel">
      <p><%= t :general_tab_header  %></p>

      <div class="row">
        <div class="col-12 col-md-10">
          <%= form.input :name, hint: t(:field_name_hint) %>
        </div>

        <div class="col-12 col-md-2 text-right">
          <label>&nbsp;</label>
          <%= form.input :active, hint: t(:field_active_hint), wrapper_html: { class: 'checkbox-wrapper' } %>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <%= form.input :description, input_html: { class: 'short' }, hint: t(:field_description_hint) %>
        </div>
      </div>

      <div class="row">
        <div class="col-12 col-md-6">
          <%= form.input :request_method, collection: Duckrails::Router::METHODS, hint: t(:field_request_method_hint) %>
        </div>

        <div class="col-12 col-md-6">
          <%= form.input :status, hint: t(:field_status_hint) %>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <%= form.input :route_path, hint: t(:field_route_path_hint) %>
        </div>
      </div>
    </div>

    <div class="tab-pane fade" id="response-body" role="tabpanel">
      <p><%= t :response_body_tab_header %></p>

      <div class="row">
        <div class="col-12 col-md-6">
          <%= form.input :body_type, collection: available_script_types, include_blank: true, hint: t(:field_body_type_hint) %>
        </div>

        <div class="col-12 col-md-6">
          <%= form.input :content_type, collection: available_mime_types, include_blank: true, hint: t(:field_content_type_hint) %>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <%= form.input :body_content, input_html: { class: 'tall' }, hint: t(:field_body_content_hint) %>
        </div>
      </div>
    </div>

    <div class="tab-pane fade" id="headers" role="tabpanel">
      <div class="row mt-2">
        <div class="col-12">
          <div class="float-right">
            <%= link_to_add_association form,
                                        :headers,
                                        title: t(:add_header_link_title),
                                        data: {
                                          association_insertion_method: 'append',
                                          association_insertion_node: '.mock-headers'
                                        } do %>
              <i class="fa fa-plus"></i>
              <span><%= t(:add_header) %></span>
              <% end %>
          </div>

          <p><%= t :headers_tab_header %></p>
        </div>
      </div>

      <div class="row">
        <div class="col-12 mock-headers">
          <%= form.simple_fields_for :headers do |header_fields| %>
            <%= render partial: 'header_fields', locals: { f: header_fields } %>
          <% end %>
        </div>
      </div>
    </div>

    <div class="tab-pane fade" id="advanced" role="tabpanel">
      <p><%= t :advanced_tab_header %></p>

      <div class="row">
        <div class="col-12 col-md-6">
          <%= form.input :script_type, collection: available_script_types, include_blank: true, hint: t(:field_script_type_hint) %>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <%= form.input :script, input_html: { class: 'tall' }, hint: t(:field_script_hint) %>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-12">
      <% unless @mock.new_record? %>
        <%= link_to(t(:delete), duckrails_mock_path(@mock), method: :delete, class: 'btn btn-danger', data: { confirm: t(:mock_deletion_confirmation) }) %>
      <% end %>

      <%= link_to t(:cancel), duckrails_mocks_path, class: 'btn btn-secondary' %>

      <%= form.submit t(:save), class: 'btn btn-success' %>
    </div>
  </div>
<% end %>
